{% extends "base.html" %}
{% block head %}
<title>{{ title }}</title>
<!-- <link href="{{static_url('css/table.css')}}" rel="stylesheet"> -->

{% end %}
{% block body %}
<div class="pageContainer">
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <h2 class="sub-header">DingDing Info</h2>
    {% if data %}
    <a href="/ding?method=new" class="btn btn-sm btn-primary">New Ding Token</a>
    <div class="table-responsive" style="margin-top: 10px">
    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="strategy_list">
        <thead>
            <tr>
                <th>name</th>
                <th>token</th>
                <th>operate</th>
            </tr>
        </thead>
        <tbody>
            {% for d in data %}
            <tr class="odd gradeX">
                <td><a href="/ding?name={{d['name']}}">{{d["name"]}}</a></td>
                <td>{{d["token"]}}</td>
                <td><a class="btn btn-sm btn-danger" href="javascript:;" onclick = "remove_row(this)" name="{{d['name']}}">del</a></td>
            </tr>
            {% end %}
        </tbody>
    </table>
    </div>

    {%else%}
    <div style="margin-top: 10px">
        <form action="/ding?method=new" method="post"  class="form-signin">
        <p>
            {%if edit%}
            <input type="hidden" name = "old_name" value="{{edit['name']}}">
            <input type="hidden" name = "ding_name" value="{{edit['name']}}">
            <label>name  : </label>{{edit['name']}}<br>
            {%else%}
            <label>name  : </label><input type="text" name="ding_name" onblur="check_ding()" size="80"><br>
            <span id="nametip" class="prompt"></span><br>
            {%end%}
        </p>
        <p>
            {%if edit%}
            <label>token  : </label><input type="text" name="ding_token" value="{{edit['token']}}" size="80"><br><br>
            <button type="submit" class="btn btn-sm btn-primary" id ="submitbutton">save</button>
        
            {%else%}
            <label>token  : </label><input type="text" name="ding_token" size="80"><br><br>
            <button type="submit" class="btn btn-sm btn-primary" id ="submitbutton" disabled="disabled">save</button>
        
            {%end%}
        </p>
        </form>
    </div>
    {% end %}
    </div>
</div>
{% end %}